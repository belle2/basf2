<?xml version="1.0" encoding="UTF-8"?>
<DetectorComponent name="MagneticField3d" xmlns:xi="http://www.w3.org/2001/XInclude" isDefault="false">
	<Description>The magnetic field description for the Belle II Detector</Description>
	<Version>0</Version>
        <Creator>GeoMagneticField</Creator>
	<Content>
		<!-- The components of the Belle II magnetic field -->		
		<Components>
			<!-- Radial solenoid magnetic field map
			     The magnetic field map is stored as a grid in cylindrical coordinates.
			     It is defined by a minimum radius and a maximum radius, a minimum z and
			     a maximum z value, a pitch size in both, r and z, and the number of grid
			     points. The ZOffset is used to account for the fact that the acceleration
			     group defines 0 to be in the center of the detector, while the detector
			     group defines the IP to be the center. This offset will shift the values
                             from the magnetic field map file to fit inside the region given by the
                             ZMin and ZMax values. The filename points to the zip file containing the
                             magnetic field map.
                             If "Beamline" is turned on and return non-zero value,
                             "Radial" return zero value.
			-->
			<!--<Component type="Radial">
				<NumberGridPointsR>175</NumberGridPointsR>
				<GridPitchR unit="cm">1.0</GridPitchR>
				<RadiusMin unit="cm">0.0</RadiusMin>
				<RadiusMax unit="cm">174.0</RadiusMax>
				<NumberGridPointsZ>801</NumberGridPointsZ>
				<GridPitchZ unit="cm">1.0</GridPitchZ>
				<ZMin unit="cm">-353.0</ZMin>
				<ZMax unit="cm">447.0</ZMax>
				<ZOffset unit="cm">47.0</ZOffset>
				<MapFilename>geometry/SolenoidFieldMap.dat.gz</MapFilename>
			</Component>-->

			<!-- Quadruple solenoid magnetic field map
			    This class represents a magnetic field map from quadrupole magnets QC[1/2]*.
			    Only the field from QC[1/2]* inside beam pipes is described.
			    Leak field inside the beam pipe from the quadruple magnet 
			    on the other beam line is also included,
			    however, leak field outside both beam pipe are not described.
			    Therefore, we should turn on this field component only when we use
			    TouschekTURTLEReader and Synchrotron radiation study, 
			    which needs accurate propagation of beam particles.
			    Field strength are calculated from the magnet parameters (K0,K1,SK0,SK1,ROTATE,DX,DY) 
			    used in accelerator simulation.
			    These parameters are provided for each 1cm slice in the beam direction.
			-->
			<!-- based on sher_5753, sler_1682, irdata.class.SKEKB20121116A -->
			<Component type="Quad">
				<MapFilenameHER>geometry/QuadFieldMapHER.dat</MapFilenameHER>
				<MapFilenameLER>geometry/QuadFieldMapLER.dat</MapFilenameLER>
				<MapFilenameHERleak>geometry/QuadFieldMapHERleak.dat</MapFilenameHERleak>
				<MapSizeHER>424</MapSizeHER>
				<MapSizeLER>396</MapSizeLER>
				<MapSizeHERleak>203</MapSizeHERleak>
				<ApertFilenameHER>geometry/ApertHER.dat</ApertFilenameHER>
				<ApertFilenameLER>geometry/ApertLER.dat</ApertFilenameLER>
				<ApertSizeHER>22</ApertSizeHER>
				<ApertSizeLER>26</ApertSizeLER>
				<CircumferenceHER unit="m">3016.314517</CircumferenceHER>
				<CircumferenceLER unit="m">3016.305585</CircumferenceLER>
			</Component>
			<!-- 3D magnetic field map near beam pipe
			     The magnetic field map is stored as a grid in cylindrical coordinates.
			     Magnetic field map in the region with 0.5<r<1.4 is bad.
			     So region with r<0.5 are only used.
			-->
			<Component type="Beamline">
				<RadiusMin unit="cm">0.0</RadiusMin>
				<RadiusMax unit="cm">0.5</RadiusMax>
				<ZMin unit="cm">-399.9</ZMin>
				<ZMax unit="cm">399.9</ZMax>
				<BeamAngle unit="cm">0.0415</BeamAngle>
				<MapFilenameHER>geometry/BeamlineFieldMap_r25_her.dat.gz</MapFilenameHER>
				<MapFilenameLER>geometry/BeamlineFieldMap_r25_ler.dat.gz</MapFilenameLER>
				<InterFilenameHER>geometry/BeamlineDelaunay_her.dat</InterFilenameHER>
				<InterFilenameLER>geometry/BeamlineDelaunay_ler.dat</InterFilenameLER>
			</Component>
		</Components>
	</Content>
</DetectorComponent>
