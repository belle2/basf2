<?xml version="1.0" encoding="UTF-8"?>
<Components>
  <!-- each ladder consists out of two modules which are glued together
       at the middle. The module in forward direction is the same as int
       the backward direction but mirrored at the global xy plane. The
       inner layer is facing inwards (chips pointing to the beampipe),
       the outer layer is pointing outwards (chips pointing to SVD).

       Due to problems with Geant4 <-> TGeo conversion this glue is
       disabled for now but this should not pose any problems as it is
       only about 500µm x 50 µm x 15.4 mm and does not contribute
       significantly to the material budget. -->

  <Ladder layer="1">
    <!-- shift defines the shift of the sensor center along the rphi direction
         of the ladder to create the windmill structure -->
    <shift  unit="mm"> 3.500</shift>
    <!-- radius (together with the phi angle specified in PXD.xml for each
         ladder) specifies the center of the local coordinate system for the
         ladder: x along rphi, 0 at specified phi, y going outward 0 at
         specified radius, z = global z, 0 at global 0 -->

    <!-- The nominal radius of the inner layer is 14 mm, but this is the inner
         surface of the sensor and here we give the center of the sensor, so
         let's add half of the sensor thickness -->
    <radius unit="mm">14.210</radius>
    <!-- Disabled as it causes problems with TGeo conversion -->
    <!--<Glue><oversize unit="um">20</oversize><Material>PXD-Glue</Material></Glue>-->
    <!-- The value of Sensors is the global z position -->
    <Sensor id="1" type="Layer1" unit="mm" flipW="true" flipV="true"> 48.013</Sensor>
    <Sensor id="2" type="Layer1" unit="mm" flipW="true">-20.013</Sensor>
  </Ladder>
  <Ladder layer="2">
    <shift  unit="mm"> 3.500</shift>
    <!-- The nominal radius of the outer layer is 22 mm, but this is the
         outersurface of the sensor and here we give the center of the sensor,
         so let's substract half of the sensor thickness -->
    <radius unit="mm">21.790</radius>
    <!-- Disabled as it causes problems with TGeo conversion -->
    <!--<Glue><oversize unit="um">20</oversize><Material>PXD-Glue</Material></Glue>-->
    <Sensor id="1" type="Layer2" unit="mm" flipV="true"> 61.513</Sensor>
    <Sensor id="2" type="Layer2" unit="mm">-23.513</Sensor>
  </Ladder>

  <Sensor type="Layer1">
    <Color>#006699</Color>
    <Material>Si</Material>
    <width  unit="mm">15.400</width>
    <length unit="mm">67.975</length>
    <height unit="mm"> 0.420</height>
    <!-- definition of the active area of the module which is a part of the
         whole thing. The position is given relative to the lower left edge of
         the module (the point with the most negative local coordinates). -->
    <Active>
      <Color>#f00</Color>
      <u unit="mm"> 0.600</u>
      <v unit="mm">22.775</v>
      <w>top</w>
      <width  unit="mm">12.500</width>
      <length unit="mm">44.800</length>
      <height unit="mm"> 0.075</height>
      <!-- limit the Geant4 stepsize to get precise information on the landau fluctuation -->
      <stepSize unit="um">5</stepSize>
      <!-- define the number of pixels in rphi direction -->
      <pixelsU>250</pixelsU>
      <!-- define the number of pixels in z direction. There are two values
           since we have two different pixel sizes inside of one module: Larger
           pixels in the outer area, smaller pixels in the middle -->
      <pixelsV>512</pixelsV>
      <pixelsV>256</pixelsV>
      <!-- splitLength defines the position inside the active area (starting at
           the outside) where the pixel size changes. Pixel size is calculated
           automatically from the size of the active area and the number of
           pixels -->
      <splitLength unit="mm">30.720</splitLength>

      <!-- Parameters describing the physical attributes of the sensor needed
           for digitization. The voltages might be time dependent and than
           should be placed somewhere else -->
      <BulkDoping unit="1/um^3">10.0</BulkDoping>
      <BackVoltage unit="V">-60.0</BackVoltage>
      <TopVoltage unit="V">0.0</TopVoltage>
      <SourceBorder unit="um">3.0</SourceBorder>
      <ClearBorder unit="um">8.0</ClearBorder>
      <DrainBorder unit="um">8.0</DrainBorder>
      <GateDepth unit="um">22</GateDepth>
      <DoublePixel>true</DoublePixel>

      <!-- Define the integration window to be 20µs. This probably should go
           somewhere else -->
      <IntegrationStart unit="us">-10.0</IntegrationStart>
      <IntegrationEnd   unit="us"> 10.0</IntegrationEnd>
    </Active>
    <!-- now we place some components on the sensor by giving the name of the
         component defined further down and the positions of all placements on
         the sensor in local coordinates, starting at the lower left edge

         possible placements for the w-coordinate are:
          - below: place below the sensor surface
          - bottom: place in the sensor but at the bottom
          - center: place in the sensor center
          - top: place in the sensor touching the top surface
          - above place on top of the sensor surface -->

    <!-- Thinning of the sensor down to the sensitive thickness by cutting out
         a piece of the silicon -->
    <Component type="ThinningLayer1">
      <u unit="mm"> 7.000</u><v unit="mm">45.390</v>
    </Component>
    <!-- mechanical reinforcements spanning to modules -->
    <Component type="Reinforcement">
      <u unit="mm"> 0.500</u><v unit="mm">66.475</v><w>bottom</w>
      <u unit="mm">13.500</u><v unit="mm">66.475</v><w>bottom</w>
      <u unit="mm">14.500</u><v unit="mm">66.475</v><w>bottom</w>
    </Component>
    <!-- left and right of the sensitive area are some grooves cut out from the
         silicon to remove material. This is done in the simulation by
         inserting a Si/Air mixture -->
    <Component type="BorderThinningLayer1">
      <u unit="mm"> 0.525</u><v unit="mm">44.085</v><w>bottom</w>
    </Component>
    <Component type="SwitcherThinningLayer1">
      <u unit="mm">14.175</u><v unit="mm">44.085</v><w>bottom</w>
    </Component>
    <!-- Readout chips outside the acceptance -->
    <Component type="ReadoutChips">
      <u unit="mm"> 7.390</u><v unit="mm">15.070</v><w>above</w>
    </Component>
    <!-- Switcher chips along the module -->
    <Component type="SwitchersLayer1">
      <u unit="mm">14.189</u><v unit="mm">44.422</v><w>above</w>
    </Component>
  </Sensor>

  <!-- The sensor in layer 2 is almost the same as for layer one except for the
       dimensions -->
  <Sensor type="Layer2">
    <Material>Si</Material>
    <Color>#006699</Color>
    <width  unit="mm">15.400</width>
    <length unit="mm">84.975</length>
    <height unit="mm"> 0.420</height>
    <Active>
      <u unit="mm"> 0.600</u>
      <v unit="mm">23.150</v>
      <w>top</w>
      <width  unit="mm">12.500</width>
      <length unit="mm">61.440</length>
      <height unit="mm"> 0.075</height>
      <stepSize unit="um">5</stepSize>
      <pixelsU>250</pixelsU>
      <pixelsV>512</pixelsV>
      <pixelsV>256</pixelsV>
      <splitLength unit="mm">43.520</splitLength>

      <BulkDoping unit="1/um^3">10.0</BulkDoping>
      <BackVoltage unit="V">-60.0</BackVoltage>
      <TopVoltage unit="V">0.0</TopVoltage>
      <SourceBorder unit="um">3.0</SourceBorder>
      <ClearBorder unit="um">8.0</ClearBorder>
      <DrainBorder unit="um">15.0</DrainBorder>
      <GateDepth unit="um">22</GateDepth>
      <DoublePixel>true</DoublePixel>

      <IntegrationStart unit="us">-10.0</IntegrationStart>
      <IntegrationEnd   unit="us"> 10.0</IntegrationEnd>
    </Active>

    <Component type="ThinningLayer2">
      <u unit="mm"> 7.000</u><v unit="mm">53.888</v>
    </Component>
    <Component type="Reinforcement">
      <u unit="mm"> 0.500</u><v unit="mm">83.475</v>
      <u unit="mm">13.500</u><v unit="mm">83.475</v>
      <u unit="mm">14.500</u><v unit="mm">83.475</v>
    </Component>
    <Component type="BorderThinningLayer2">
      <u unit="mm"> 0.525</u><v unit="mm">52.545</v><w>bottom</w>
    </Component>
    <Component type="SwitcherThinningLayer2">
      <u unit="mm">14.175</u><v unit="mm">52.545</v><w>bottom</w>
    </Component>
    <Component type="ReadoutChips">
      <u unit="mm"> 7.390</u><v unit="mm">15.731</v><w>above</w>
    </Component>
    <Component type="SwitchersLayer2">
      <u unit="mm">14.189</u><v unit="mm">52.242</v><w>above</w>
    </Component>
  </Sensor>

  <!-- No we start defining components of the sensor by assigning a Material
       and color to given box dimensions. If angle is specified, all for edges
       of the box will be slanted with the given angle between surface and edge
       getting thinner in positive w direction. This is needed for etchings in
       the silicon as etching is done along the crystal orientation.

       Components can be placed in other components, but then the coordinates
       are given with respect to the center of the mother component. If no
       dimensions are given for the mother component it will be created just
       large enough to contain all placements -->

  <Component name="ThinningLayer1">
    <Material>ColdAir</Material>
    <Color>#5599BB</Color>
    <width  unit="mm">12.000</width>
    <length unit="mm">44.775</length>
    <height unit="mm"> 0.345</height>
    <angle  unit="deg">54.7</angle>
  </Component>

  <Component name="ThinningLayer2">
    <Material>ColdAir</Material>
    <Color>#5599BB</Color>
    <width  unit="mm">12.000</width>
    <length unit="mm">61.775</length>
    <height unit="mm"> 0.345</height>
    <angle  unit="deg">54.7</angle>
  </Component>

  <Component name="Reinforcement">
    <Material>PXD-Zirconoxide</Material>
    <Color>#CCCCCC</Color>
    <width  unit="mm">0.600</width>
    <length unit="mm">3.000</length>
    <height unit="mm">0.345</height>
    <angle  unit="deg">54.7</angle>
  </Component>

  <Component name="ReadoutChips">
    <Component type="DCD">
      <u unit="mm">-5.250</u><v unit="mm"> 3.191</v>
      <u unit="mm">-1.750</u><v unit="mm"> 3.191</v>
      <u unit="mm"> 1.750</u><v unit="mm"> 3.191</v>
      <u unit="mm"> 5.250</u><v unit="mm"> 3.191</v>
    </Component>
    <Component type="DHP">
      <u unit="mm">-5.250</u><v unit="mm">-3.191</v>
      <u unit="mm">-1.750</u><v unit="mm">-3.191</v>
      <u unit="mm"> 1.750</u><v unit="mm">-3.191</v>
      <u unit="mm"> 5.250</u><v unit="mm">-3.191</v>
    </Component>
  </Component>

  <Component name="SwitchersLayer1">
    <Component type="Switcher">
      <v unit="mm">-18.560</v>
      <v unit="mm">-11.136</v>
      <v unit="mm"> -3.712</v>
      <v unit="mm">  3.712</v>
      <v unit="mm"> 11.136</v>
      <v unit="mm"> 18.560</v>
    </Component>
  </Component>

  <Component name="SwitchersLayer2">
    <Component type="Switcher">
      <v unit="mm">-25.719</v>
      <v unit="mm">-15.431</v>
      <v unit="mm"> -5.144</v>
      <v unit="mm">  5.144</v>
      <v unit="mm"> 15.431</v>
      <v unit="mm"> 25.719</v>
    </Component>
  </Component>

  <Component name="SwitcherThinningLayer1">
    <Material>PXD-SwitcherThinning</Material>
    <Color>#5599BB</Color>
    <width  unit="mm"> 2.250</width>
    <length unit="mm">41.430</length>
    <height unit="mm"> 0.345</height>
    <angle unit="deg">54.7</angle>
  </Component>

  <Component name="BorderThinningLayer1">
    <Material>PXD-BorderThinning</Material>
    <Color>#5599BB</Color>
    <width  unit="mm"> 0.850</width>
    <length unit="mm">41.430</length>
    <height unit="mm"> 0.345</height>
    <angle unit="deg">54.7</angle>
  </Component>

  <Component name="SwitcherThinningLayer2">
    <Material>PXD-SwitcherThinning</Material>
    <Color>#5599BB</Color>
    <width  unit="mm"> 2.250</width>
    <length unit="mm">58.510</length>
    <height unit="mm"> 0.345</height>
    <angle unit="deg">54.7</angle>
  </Component>

  <Component name="BorderThinningLayer2">
    <Material>PXD-BorderThinning</Material>
    <Color>#5599BB</Color>
    <width  unit="mm"> 0.850</width>
    <length unit="mm">58.510</length>
    <height unit="mm"> 0.345</height>
    <angle unit="deg">54.7</angle>
  </Component>

  <Component name="DCD">
    <Material>PXD-DCD</Material>
    <Color>#666633</Color>
    <activeChipID>1</activeChipID>
    <width  unit="mm">3.410</width>
    <length unit="mm">5.310</length>
    <height unit="mm">0.400</height>
  </Component>

  <Component name="DHP">
    <Material>PXD-DHP</Material>
    <Color>#666666</Color>
    <activeChipID>2</activeChipID>
    <width  unit="mm">3.410</width>
    <length unit="mm">5.130</length>
    <height unit="mm">0.400</height>
  </Component>

  <Component name="Switcher">
    <Material>PXD-Switcher</Material>
    <Color>#660000</Color>
    <activeChipID>3</activeChipID>
    <width  unit="mm">2.035</width>
    <length unit="mm">3.600</length>
    <height unit="mm">0.400</height>
  </Component>
</Components>
