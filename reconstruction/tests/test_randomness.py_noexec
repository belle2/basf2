##########################################################################
# basf2 (Belle II Analysis Software Framework)                           #
# Author: The Belle II Collaboration                                     #
#                                                                        #
# See git log for contributors and copyright holders.                    #
# This file is licensed under LGPL-3.0, see LICENSE.md.                  #
##########################################################################

'''
We generate, simulate and reconstruct few events with two different processes
and we check the two processes give exactly the same output.
'''


import basf2 as b2
import generators as ge
import simulation as si
import reconstruction as re
import mdst


class PrintRandomNumber(b2.Module):
    '''Simple module for printing a random number per event.'''

    def event(self):
        '''Event method.'''
        import ROOT  # noqa
        b2.B2INFO(f'A random number is {ROOT.gRandom.Uniform()}')


main = b2.Path()

main.add_module('EventInfoSetter')

main.add_module('Progress')

main.add_module(PrintRandomNumber())

ge.add_kkmc_generator(main, 'mu-mu+')

main.add_module(PrintRandomNumber())

si.add_simulation(main)

main.add_module(PrintRandomNumber())

re.add_reconstruction(main)

main.add_module(PrintRandomNumber())

mdst.add_mdst_dump(main, print_untested=False, print_mutable=False)

b2.process(main)
