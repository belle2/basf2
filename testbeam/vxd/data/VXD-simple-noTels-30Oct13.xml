<?xml version="1.0" encoding="UTF-8"?>
<Detector xmlns:xi="http://www.w3.org/2001/XInclude">
	<Name>TBDetector</Name>
	<Description>Common PXD and SVD TestBeam</Description>
	<Global>
		<material>Air</material>
		<width  unit="m">2.0</width>
		<length unit="m">2.0</length>
		<height unit="m">2.0</height>
	</Global>
	
	<!-- Define materials -->
	<xi:include href="../../geometry/BasicMaterials.xml"/>
	<xi:include href="../../pxd/PXD-Materials.xml"/>
	<xi:include href="../../svd/SVD-Materials.xml"/>
	<xi:include href="./TB-Materials.xml"/>
	
	<!-- Magnetic field inside PCMag @ DESY -->
	<xi:include href="VXD-MagneticField.xml"/>
	
	<!-- Subdedectors -->
	<DetectorComponent name="TB" xmlns:xi="http://www.w3.org/2001/XInclude">
		<Creator library="testbeam">VXDTBCreator</Creator>
		<Content>
			<!-- If this is true, TrueHits will only be created for primary particles, Secondaries produced by Geant4 will not create TrueHits -->
			<OnlyPrimaryTrueHits>false</OnlyPrimaryTrueHits>
			<!--Settings for background and exposure studies -->
			<ActiveChips desc="Set to true to make chips on sensors sensitive">false</ActiveChips>
			<SeeNeutrons desc="Set to true to make sensitive detectors see neutrons">false</SeeNeutrons>
			<SensitiveThreshold desc="Minimum deposited energy per geant4 step" unit="eV">1.0</SensitiveThreshold>
			<Alignment>
				<xi:include href="VXD-Alignment.xml" xpointer="xpointer(//*)" />
			</Alignment>
			<Volumes>
				<Volume>
					<Color>#006699</Color>
					<Name>PlexiglasWall</Name>

					<Material>PMMA</Material>
					<Shape>Box</Shape>
		
					<DX unit="mm">650.0</DX>
					<DY unit="mm">0.0</DY>
					<DZ unit="mm">0</DZ>
					<Theta unit="deg">90</Theta>
					<Phi unit="deg">90</Phi>
					<Psi unit="deg">90</Psi>		  
		
					<HalfX unit="cm">50</HalfX>
					<HalfY unit="cm">50</HalfY>
					<HalfZ unit="cm">0.25</HalfZ>	
				</Volume>				
				<Volume>
					<Name>SupportBox</Name>
					<AlignComponent>SupportBox</AlignComponent>
					<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SupportBox']/*)" />
					

					
					<!--Volume>
						<Name>PXD_module_tel1</Name>
						<DX unit="mm">116</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module2']/*)" />
						<Volume>
							<Name>PXD_sensor_tel1</Name>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor2']/*)" />
							
							<Active>
								<SensorID>1</SensorID><Ladder>2</Ladder><Layer>7</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active2']/*)" />			  
							</Active>
						</Volume>
					</Volume>	
					<Volume>
						<Name>PXD_module_tel2</Name>
						<DX unit="mm">96</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module2']/*)" />
						<Volume>
							<Name>PXD_sensor_tel2</Name>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor2']/*)" />
							
							<Active>
								<SensorID>2</SensorID><Ladder>2</Ladder><Layer>7</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active2']/*)" />			  
							</Active>
						</Volume>
					</Volume>

					<Volume>
						<Name>PXD_module_tel3</Name>
						<DX unit="mm">76.0</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module2']/*)" />
						<Volume>
							<Name>PXD_sensor_tel3</Name>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor2']/*)" />
							
							<Active>
								<SensorID>3</SensorID><Ladder>2</Ladder><Layer>7</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active2']/*)" />			  
							</Active>
						</Volume>
					</Volume-->	


					<Volume>
						<Name>PXD_module_1</Name>
						<DX unit="mm">56.0</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module']/*)" />
						<Volume>
							<Name>PXD_sensor_1</Name>
							<AlignComponent>1.1.1</AlignComponent>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor']/*)" />
							
							<Active>
								<SensorID>1</SensorID><Ladder>1</Ladder><Layer>1</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>		
					
					<Volume>
						<Name>PXD_module_2</Name>
						<DX unit="mm">48.0</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module']/*)" />
						<Volume>
							<Name>PXD_sensor_2</Name>
							<AlignComponent>2.1.2</AlignComponent>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor']/*)" />
							
							<Active>
								<SensorID>2</SensorID><Ladder>1</Ladder><Layer>2</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>					
					
					<Volume>
						<Name>SVD_module_1</Name>
						<DX unit="mm">31.84</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_module']/*)" />
						<Volume>
							<Name>SVD_sensor_1</Name>
							<AlignComponent>3.1.3</AlignComponent>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_sensor']/*)" />
							
							<Active>
								<SensorID>3</SensorID><Ladder>1</Ladder><Layer>3</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>						
					
					<Volume>
						<Name>SVD_module_2</Name>
						<DX unit="mm">-10.160</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_module']/*)" />
						<Volume>
							<Name>SVD_sensor_2</Name>
							<AlignComponent>4.1.4</AlignComponent>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_sensor']/*)" />
							
							<Active>
								<SensorID>4</SensorID><Ladder>1</Ladder><Layer>4</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>
					
					<Volume>
						<Name>SVD_module_3</Name>
						<DX unit="mm">-35.160</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_module']/*)" />
						<Volume>
							<Name>SVD_sensor_3</Name>
							<AlignComponent>5.1.5</AlignComponent>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_sensor']/*)" />
							
							<Active>
								<SensorID>5</SensorID><Ladder>1</Ladder><Layer>5</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>
					
					<Volume>
						<Name>SVD_module_4</Name>
						<DX unit="mm">-65.160</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_module']/*)" />
						<Volume>
							<Name>SVD_sensor_4</Name>
							<AlignComponent>6.1.6</AlignComponent>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_sensor']/*)" />
							
							<Active>
								<SensorID>6</SensorID><Ladder>1</Ladder><Layer>6</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>

					<!--Volume>
						<Name>PXD_module_tel4</Name>
						<DX unit="mm">-85</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module2']/*)" />
						<Volume>
							<Name>PXD_sensor_tel4</Name>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor2']/*)" />
							
							<Active>
								<SensorID>4</SensorID><Ladder>3</Ladder><Layer>7</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active2']/*)" />			  
							</Active>
						</Volume>
					</Volume>	
					<Volume>
						<Name>PXD_module_tel5</Name>
						<DX unit="mm">-105</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module2']/*)" />
						<Volume>
							<Name>PXD_sensor_tel5</Name>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor2']/*)" />
							
							<Active>
								<SensorID>5</SensorID><Ladder>3</Ladder><Layer>7</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active2']/*)" />			  
							</Active>
						</Volume>
					</Volume>
					<Volume>
						<Name>PXD_module_tel6</Name>
						<DX unit="mm">-125</DX>
						<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module2']/*)" />
						<Volume>
							<Name>PXD_sensor_tel6</Name>
							<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor2']/*)" />
							
							<Active>
								<SensorID>6</SensorID><Ladder>3</Ladder><Layer>7</Layer>
								<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active2']/*)" />			  
							</Active>
						</Volume>
					</Volume-->	
					
				</Volume>


			  
				<xi:include href="VXD-Snippets.xml" xpointer="xpointer(//Snippet[@name='Magnet']/*)" />			  
				
				
			</Volumes>
		</Content>
	</DetectorComponent>
	
	<Tracking>
		<xi:include href="VXDTFindexTB.xml"/>
  </Tracking>

</Detector>
