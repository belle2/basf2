<?xml version="1.0" encoding="UTF-8"?>
<Detector xmlns:xi="http://www.w3.org/2001/XInclude">
	<Name>TBDetector</Name>
	<Description>Common PXD and SVD TestBeam</Description>
	<Global>
		<material>Air</material>
		<width  unit="m">2.0</width>
		<length unit="m">2.0</length>
		<height unit="m">2.0</height>
	</Global>
	
	<!-- Define materials -->
	<xi:include href="../../geometry/BasicMaterials.xml"/>
	<xi:include href="../../pxd/PXD-Materials.xml"/>
	<xi:include href="../../svd/SVD-Materials.xml"/>
	
	<!-- Magnetic field inside PCMag @ DESY -->
	<xi:include href="VXD-MagneticField.xml"/>
	
	<!-- Subdedectors -->
	<DetectorComponent name="TB" xmlns:xi="http://www.w3.org/2001/XInclude">
		<Creator library="testbeam">TBCreator</Creator>
		<Content>
			<!-- If this is true, TrueHits will only be created for primary particles, Secondaries produced by Geant4 will not create TrueHits -->
			<OnlyPrimaryTrueHits>false</OnlyPrimaryTrueHits>
			<!--Settings for background and exposure studies -->
			<ActiveChips desc="Set to true to make chips on sensors sensitive">false</ActiveChips>
			<SeeNeutrons desc="Set to true to make sensitive detectors see neutrons">false</SeeNeutrons>
			<SensitiveThreshold desc="Minimum deposited energy per geant4 step" unit="eV">1.0</SensitiveThreshold>
			<Alignment>
				<!--xi:include href="VXD-Alignment.xml" xpointer="xpointer(//*)" /-->
			</Alignment>
			<Volumes>
				
				<Volume>
					<Name>SupportBox</Name>
					<AlignComponent>SupportBox</AlignComponent>
					<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SupportBox']/*)" />
					
					
					
					<Volume>
						<Name>PXD_module_1</Name>
						<!--DX unit="mm">14.0</DX-->
						<DX unit="mm">-56.0</DX>
						<!--DX unit="mm">0.0</DX-->
						<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module']/*)" />
						<Volume>
							<Name>PXD_sensor_1</Name>
							<AlignComponent>1.1.1</AlignComponent>
							<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor']/*)" />
							
							<Active>
								<SensorID>1</SensorID><Ladder>1</Ladder><Layer>1</Layer>
								<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>		
					
					<Volume>
						<Name>PXD_module_2</Name>
						<DX unit="mm">-48.0</DX>
						<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_module']/*)" />
						<Volume>
							<Name>PXD_sensor_2</Name>
							<AlignComponent>1.1.2</AlignComponent>
							<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_sensor']/*)" />
							
							<Active>
								<SensorID>2</SensorID><Ladder>1</Ladder><Layer>1</Layer>
								<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='PXD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>					
					
					<Volume>
						<Name>SVD_module_1</Name>
						<DX unit="mm">-31.84</DX>
						<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_module']/*)" />
						<Volume>
							<Name>SVD_sensor_1</Name>
							<AlignComponent>1.1.3</AlignComponent>
							<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_sensor']/*)" />
							
							<Active>
								<SensorID>3</SensorID><Ladder>1</Ladder><Layer>1</Layer>
								<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>						
					
					<Volume>
						<Name>SVD_module_2</Name>
						<DX unit="mm">10.160</DX>
						<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_module']/*)" />
						<Volume>
							<Name>SVD_sensor_2</Name>
							<AlignComponent>1.1.4</AlignComponent>
							<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_sensor']/*)" />
							
							<Active>
								<SensorID>4</SensorID><Ladder>1</Ladder><Layer>1</Layer>
								<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>
					
					<Volume>
						<Name>SVD_module_3</Name>
						<DX unit="mm">35.160</DX>
						<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_module']/*)" />
						<Volume>
							<Name>SVD_sensor_3</Name>
							<AlignComponent>1.1.5</AlignComponent>
							<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_sensor']/*)" />
							
							<Active>
								<SensorID>5</SensorID><Ladder>1</Ladder><Layer>1</Layer>
								<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>
					
					<Volume>
						<Name>SVD_module_4</Name>
						<DX unit="mm">65.160</DX>
						<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_module']/*)" />
						<Volume>
							<Name>SVD_sensor_4</Name>
							<AlignComponent>1.1.6</AlignComponent>
							<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_sensor']/*)" />
							
							<Active>
								<SensorID>6</SensorID><Ladder>1</Ladder><Layer>1</Layer>
								<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='SVD_active']/*)" />			  
							</Active>
						</Volume>
					</Volume>
					
				</Volume>
			  
				<xi:include href="VXDBeamProfile-Snippets.xml" xpointer="xpointer(//Snippet[@name='Magnet']/*)" />			  
				
				
			</Volumes>
		</Content>
	</DetectorComponent>
</Detector>
