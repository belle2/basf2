#!/bin/bash

# this is an expample script demonstrating on how to submit a series of jobs for different random seeds to the queue at KEK
# NOTE: you HAVE to adjust the numbers below otherwise you will generate 2000k events!!

# list of random seeds for which events should be generated (adjust to your needs)
# for each of these seeds nevt events will be generated,
# the seeds have been generated with following shell command (the output file rand.txt contains them): 
#    rm -f rand.txt ; for i in `seq 1 500`; do echo "$RANDOM " >> rand.txt;  done; cat  rand.txt | sort | uniq | wc -l ;
# the command was repeated till it outputs 500 (the number of requested seeds) to ensure that all seeds are uniq
rndseeds=(21014 26190 14559 26563 1796 21258 28692 32043 23894 3530 3532 3009 32625 1010 13276 29286 23824 28897 30705 8868 28898 16895 10917 24935 22455 22411 17621 16566 14320 6680 20073 6933 18959 18244 32422 25671 5677 12412 28820 18306 24840 31053 30087 14593 12975 21356 5969 32522 8682 11489 6828 21059 19756 10105 16525 6301 11527 30902 19460 25610 31773 6243 26018 11876 25362 31332 24216 71 26717 3146 4972 23210 29310 28329 15446 30059 2484 24754 1834 6355 1111 14434 18136 14209 8837 1908 5047 8799 18947 18808 7951 27883 21837 25947 23564 25305 13562 19765 9202 3841 24396 16468 28770 25565 8164 29997 13334 12537 23686 10816 31852 29079 15655 4105 5215 4603 5181 21043 21495 23159 3425 12769 31659 18557 14534 28481 23588 2926 13141 15034 23940 13126 24292 29365 1953 11470 16926 1097 7161 5427 32743 25236 12092 24502 26671 7396 28540 26532 28569 25622 7781 17811 28585 29723 24371 19993 29175 19638 4421 8148 20497 16516 26265 9337 24786 20125 25282 30305 10290 15345 27899 7697 12703 26371 15913 7833 5126 26499 26973 2406 25656 25329 25261 7284 8428 14240 11055 16547 15774 8030 10041 23749 22497 10951 13596 4314 12689 30592 7433 25179 32108 4874 16735 571 3620 3178 15383 21490 1844 8327 19007 19503 17962 9423 21147 1216 6878 14270 28778 4692 476 15769 15463 24010 18262 14202 23670 9591 17385 5863 24980 28995 5776 1974 6943 12038 20824 8610 23227 23755 22538 14588 30929 9314 31701 13184 29368 26543 18533 5914 29078 26469 22983 26540 30712 2817 13831 11619 26667 8402 2282 29075 13381 27004 9473 2724 18827 32337 14676 1651 9961 14319 1027 4100 13221 18144 25184 15469 25524 31402 21238 14549 733 8617 32065 27694 32457 7032 16576 16090 11839 28230 23176 22200 27214 32481 8245 13541 334 528 2269 8179 18988 27468 30776 17489 29801 16612 23076 5986 18516 21464 20246 26076 3443 22014 14437 8404 25993 15617 13423 7843 11454 12865 5853 25624 5101 31178 24758 3818 19475 18309 10022 1458 7443 7317 7856 32475 4878 12736 1174 20642 1007 3249 25835 19664 18298 15395 29305 13293 10607 3409 24685 17796 3791 28100 11592 4377 17809 29538 19404 28137 12847 27932 31476 28637 21286 15466 12214 9858 17323 28099 21865 14026 12395 28303 14637 2379 30166 29905 5100 7250 4862 12594 2568 27614 6384 24076 15408 6204 15003 28302 2685 16087 13872 19855 15499 6241 17693 17579 3631 20019 10272 9696 21899 29064 25279 4155 26955 22989 18681 9495 23075 25384 3459 22373 26559 1356 3468 3107 6104 16284 14696 11887 22148 17137 56 9083 10435 24613 27071 11251 2267 10492 2377 14399 28183 27066 27826 26792 15810 22826 32100 20736 11974 5506 18456 30876 31245 8312 20006 23521 22721 17283 971 21278 1756 30318 25643 27682 30049 30962 3528 7509 67 31593 22078 9544 14441 8625 4405 23791 31872 694 7753 281 17136 26700 29221 31200 8804 9141 5245 18011 22054 3793 3397 2080 4069 24078 5456 23322 12995 19333 25714 20737 27581 5348 14298 437)


# the name of the output directory where the root files will be stored
outdir=./datadir/
# number of events generated per random seed (at around 6000 events the cpu limit is reached for the s queue)
nevt=4000
# the name of the queue at KEK
queue=l

# loop over all random seeds
for seed in ${rndseeds[@]} 
do
  echo $seed
  # use loglevel WARNING so that information on non-default DB payloads is displayed
  bsub -q $queue -o ${outdir}log${seed}.log  basf2 -l WARNING eventSimulation.py $seed $outdir -n $nevt
done
